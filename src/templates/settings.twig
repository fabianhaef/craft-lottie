{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}

{% set title = "Craft Lottie Settings"|t('craft-lottie') %}

{% set crumbs = [
    { label: plugin.name, url: url('craft-lottie') },
    { label: "Settings"|t('app'), url: url('craft-lottie/settings') }
] %}

{% block content %}
    <form method="post" accept-charset="UTF-8">
        {{ csrfInput() }}
        {{ actionInput('craft-lottie/settings/save') }}
        {{ redirectInput('craft-lottie/settings') }}

        <input type="hidden" name="pluginHandle" value="craft-lottie">

        <h2 class="first">{{ "Lottie Volume Configuration"|t('craft-lottie') }}</h2>

        {% set allVolumes = craft.app.volumes.getAllVolumes() %}
        {% set volumeOptions = [] %}
        {% for volume in allVolumes %}
            {% set volumeOptions = volumeOptions|merge([{ label: volume.name, value: volume.id }]) %}
        {% endfor %}

        {{ forms.selectField({
            id: 'lottieVolumeId',
            name: 'settings[lottieVolumeId]',
            label: "Lottie Volume"|t('craft-lottie'),
            instructions: "Select the volume where Lottie files are stored. Files uploaded via the dashboard will be saved to this volume."|t('craft-lottie'),
            options: volumeOptions,
            value: settings.lottieVolumeId,
            errors: settings.getErrors('lottieVolumeId')
        }) }}

        <div class="buttons">
            <button type="submit" class="btn submit">{{ "Save"|t('app') }}</button>
        </div>
    </form>
{% endblock %}
